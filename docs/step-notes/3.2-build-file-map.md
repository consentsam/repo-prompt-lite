# Step 3.2 - Build <file_map>

## What Was Done
- Created a new `formatUtils.ts` utility file with functions to format the file structure
- Implemented a recursive function to build a tree structure from the flat list of files
- Created an ASCII tree formatter that outputs a hierarchical text representation of the file structure
- Wrapped the ASCII tree with `<file_map>` tags for prompt compatibility
- Added a FileMapPreview component to show the generated tree structure
- Updated the App component to include a preview toggle button

## Implementation Details
- Built the tree structure from flat files using parent-child relationships
- Sorted files by path depth to ensure proper hierarchical processing
- Used a map to quickly find parent nodes during tree construction
- Implemented recursive formatting with proper indentation and tree branch characters
- Created a preview component with monospace font and styled container
- Added a toggle button to show/hide the preview
- Extracted the root folder name to display as the top level of the tree

## Testing
- Verified that the tree structure correctly represents the file hierarchy
- Checked that the ASCII formatting uses the correct characters (└──, ├──, │, etc.)
- Confirmed that the preview correctly displays and hides when toggled
- Tested with various file structures to ensure proper nesting and formatting
- Verified that the preview updates when the selection changes

## Follow-ups
- Implement clipboard writing functionality in Step 3.3
- Consider adding the ability to customize the root folder name
- Add file content reading to complete the full prompt structure 